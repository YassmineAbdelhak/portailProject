{"ast":null,"code":"import _classCallCheck from \"D:\\\\work\\\\YasmineAbdelhakStaged'\\xE9t\\xE9\\\\SumIntership\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\work\\\\YasmineAbdelhakStaged'\\xE9t\\xE9\\\\SumIntership\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"D:\\\\work\\\\YasmineAbdelhakStaged'\\xE9t\\xE9\\\\SumIntership\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"D:\\\\work\\\\YasmineAbdelhakStaged'\\xE9t\\xE9\\\\SumIntership\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"D:\\\\work\\\\YasmineAbdelhakStaged'\\xE9t\\xE9\\\\SumIntership\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"D:\\\\work\\\\YasmineAbdelhakStaged'\\xE9t\\xE9\\\\SumIntership\\\\src\\\\views\\\\login.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { FormGroup, Input, Row, Col, Form } from \"reactstrap\";\nimport '../assets/scss/style.scss';\nimport Aux from \"../hoc/_Aux\";\nimport NotificationAlert from 'react-notification-alert';\nimport jwt from \"jsonwebtoken\";\nimport jwt_decode from \"jwt-decode\";\n\nvar Login = /*#__PURE__*/function (_React$Component) {\n  _inherits(Login, _React$Component);\n\n  var _super = _createSuper(Login);\n\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _super.call(this, props);\n\n    _this.notify = function (place) {\n      var options = {};\n      options = {\n        place: place,\n        message: /*#__PURE__*/React.createElement(\"div\", {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 22,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 23,\n            columnNumber: 11\n          }\n        }, _this.state.error)),\n        type: 'warning',\n        icon: 'tim-icons icon-bell-55',\n        autoDismiss: 7\n      };\n\n      _this.refs.notificationAlert.notificationAlert(options);\n    };\n\n    _this.togglePasswordVisibility = function () {\n      var isPasswordShown = _this.state.isPasswordShown;\n\n      _this.setState({\n        isPasswordShown: !isPasswordShown\n      });\n    };\n\n    _this.onChangeUsername = _this.onChangeUsername.bind(_assertThisInitialized(_this));\n    _this.onChangePassword = _this.onChangePassword.bind(_assertThisInitialized(_this));\n    _this.onSubmit = _this.onSubmit.bind(_assertThisInitialized(_this));\n    _this.state = {\n      username: '',\n      password: '',\n      errorMessage: '',\n      isPasswordShown: false,\n      admin: null\n    };\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"onChangeUsername\",\n    value: function onChangeUsername(e) {\n      this.setState({\n        username: e.target.value\n      });\n    }\n  }, {\n    key: \"onChangePassword\",\n    value: function onChangePassword(e) {\n      this.setState({\n        password: e.target.value\n      });\n    }\n  }, {\n    key: \"onSubmit\",\n    value: function onSubmit(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n      var user = {\n        username: this.state.username,\n        password: this.state.password\n      };\n      axios.post('http://localhost:3000/ManageEmployee/loginemployee', user).then(function (res) {\n        //console.log(res.data);\n        localStorage.setItem(\"token\", res.data.token);\n        var token = localStorage.getItem(\"token\");\n\n        if (token) {\n          var decoded = jwt.decode(token, {\n            complete: true\n          });\n          console.log(decoded.payload.employee.position);\n\n          if (decoded) {\n            if (decoded.payload.employee.position === \"HR\") {\n              _this2.setState({\n                admin: true\n              });\n            } else if (decoded.payload.employee.position === \"Employee\") {\n              _this2.setState({\n                admin: false\n              });\n            }\n          }\n        }\n\n        {\n          _this2.state.admin === true ? window.location = '/admin/listemployee' : window.location = '/admin/listconge';\n        }\n      }).catch(function (error) {\n        _this2.notify('tc');\n\n        console.log(error);\n      });\n    }\n    /* onSubmit(e) {\r\n       e.preventDefault();\r\n         const user={\r\n         username: this.state.username,\r\n         password: this.state.password\r\n       }\r\n         axios.post('http://localhost:3000/ManageEmployee/loginemployee',user)\r\n         .then(res => {\r\n           console.log(res.data);\r\n           localStorage.setItem(\"token\",res.data.token)\r\n           let token = localStorage.getItem(\"token\")\r\n           if(token){\r\n             let decoded = jwt.decode(token)\r\n             console.log(decoded)\r\n             if(decoded){\r\n               console.log(decoded.data.position)\r\n               if(decoded.data.position === \"HR\" || decoded.data.position === \"CEO\" || decoded.data.position === \"Supervisor\"){\r\n                 this.setState({admin: true});\r\n               } else if(decoded.data.position === \"Employee\"){\r\n                 this.setState({admin: false});\r\n               }\r\n               }\r\n           }\r\n           {this.state.admin===true?(window.location = '/admin/listemployee'):(window.location = '/admin/listConge')}   \r\n         })\r\n           .catch((error) => {\r\n             //this.setState({errorMessage: error.response.data.message});\r\n             this.notify('tc');\r\n             console.log(error);\r\n           });\r\n           \r\n     }*/\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var isPasswordShown = this.state.isPasswordShown;\n      return /*#__PURE__*/React.createElement(Aux, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"auth-wrapper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"react-notification-alert-container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(NotificationAlert, {\n        ref: \"notificationAlert\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"auth-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"auth-bg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"r\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"r s\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"r s\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"r\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(Form, {\n        onSubmit: this.onSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        className: \"mb-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 33\n        }\n      }, \"Login\"), /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        md: \"12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(FormGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(Input, {\n        type: \"text\",\n        className: \"form-control\",\n        placeholder: \"Username\",\n        required: true,\n        value: this.state.username,\n        onChange: this.onChangeUsername,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 45\n        }\n      })))), /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        md: \"12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(FormGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(Input, {\n        type: isPasswordShown ? \"text\" : \"password\",\n        className: \"form-control\",\n        placeholder: \"password\",\n        required: true,\n        value: this.state.password,\n        onChange: this.onChangePassword,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 45\n        }\n      }), /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa \".concat(isPasswordShown ? \"fa-eye-slash\" : \"fa-eye\"),\n        style: {\n          position: 'absolute',\n          top: '13px',\n          right: '10px',\n          cursor: 'pointer'\n        },\n        onClick: this.togglePasswordVisibility,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 46\n        }\n      })))), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-primary shadow-2 mb-4\",\n        type: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 33\n        }\n      }, \"Login\")))))));\n    }\n  }]);\n\n  return Login;\n}(React.Component);\n\nexport default Login;","map":{"version":3,"sources":["D:/work/YasmineAbdelhakStaged'été/SumIntership/src/views/login.js"],"names":["React","axios","FormGroup","Input","Row","Col","Form","Aux","NotificationAlert","jwt","jwt_decode","Login","props","notify","place","options","message","state","error","type","icon","autoDismiss","refs","notificationAlert","togglePasswordVisibility","isPasswordShown","setState","onChangeUsername","bind","onChangePassword","onSubmit","username","password","errorMessage","admin","e","target","value","preventDefault","user","post","then","res","localStorage","setItem","data","token","getItem","decoded","decode","complete","console","log","payload","employee","position","window","location","catch","top","right","cursor","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport {\r\n    FormGroup,\r\n    Input,\r\n    Row,\r\n    Col,\r\n    Form\r\n  } from \"reactstrap\";\r\nimport '../assets/scss/style.scss';\r\nimport Aux from \"../hoc/_Aux\";\r\nimport NotificationAlert from 'react-notification-alert';\r\nimport jwt from \"jsonwebtoken\";\r\nimport jwt_decode from \"jwt-decode\";\r\n\r\nclass Login extends React.Component {\r\n  notify = (place) => {\r\n    var options = {};\r\n    options = {\r\n      place: place,\r\n      message: (\r\n        <div>\r\n          <div>{this.state.error}</div>\r\n        </div>\r\n      ),\r\n      type: 'warning',\r\n      icon: 'tim-icons icon-bell-55',\r\n      autoDismiss: 7,\r\n    };\r\n    this.refs.notificationAlert.notificationAlert(options);\r\n  }\r\n    constructor(props) {\r\n        super(props);\r\n    \r\n        this.onChangeUsername = this.onChangeUsername.bind(this);\r\n        this.onChangePassword = this.onChangePassword.bind(this);\r\n        this.onSubmit = this.onSubmit.bind(this);\r\n    \r\n        this.state = {\r\n          username: '',\r\n          password: '',\r\n          errorMessage: '',\r\n          isPasswordShown : false,\r\n          admin:null\r\n        }\r\n      }\r\n      onChangeUsername(e) {\r\n        this.setState({\r\n          username: e.target.value\r\n        })\r\n      }\r\n      onChangePassword(e) {\r\n        this.setState({\r\n          password:  e.target.value\r\n        })\r\n      }\r\n      \r\n  togglePasswordVisibility = () =>{\r\n    const {isPasswordShown} = this.state;\r\n    this.setState({ isPasswordShown: !isPasswordShown});\r\n  }\r\n\r\n  onSubmit(e) {\r\n    e.preventDefault();\r\n    const user={\r\n      username: this.state.username,\r\n      password: this.state.password\r\n    }\r\n    axios.post('http://localhost:3000/ManageEmployee/loginemployee',user)\r\n      .then(res => {\r\n        //console.log(res.data);\r\n        localStorage.setItem(\"token\",res.data.token)\r\n        let token = localStorage.getItem(\"token\")\r\n        if(token){\r\n          let decoded = jwt.decode(token,{complete: true})\r\n          console.log(decoded.payload.employee.position)\r\n          if (decoded){\r\n            if(decoded.payload.employee.position === \"HR\"){\r\n              this.setState({admin: true});\r\n            } else if(decoded.payload.employee.position === \"Employee\"){\r\n              this.setState({admin: false});\r\n            }\r\n\r\n          }\r\n        }\r\n        {this.state.admin===true?(window.location = '/admin/listemployee'):(window.location = '/admin/listconge')}   \r\n      })\r\n        .catch((error) => {\r\n          this.notify('tc');\r\n          console.log(error);\r\n        });\r\n        \r\n  }\r\n    \r\n     /* onSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        const user={\r\n          username: this.state.username,\r\n          password: this.state.password\r\n        }\r\n\r\n        axios.post('http://localhost:3000/ManageEmployee/loginemployee',user)\r\n          .then(res => {\r\n            console.log(res.data);\r\n            localStorage.setItem(\"token\",res.data.token)\r\n            let token = localStorage.getItem(\"token\")\r\n            if(token){\r\n              let decoded = jwt.decode(token)\r\n              console.log(decoded)\r\n              if(decoded){\r\n                console.log(decoded.data.position)\r\n                if(decoded.data.position === \"HR\" || decoded.data.position === \"CEO\" || decoded.data.position === \"Supervisor\"){\r\n                  this.setState({admin: true});\r\n                } else if(decoded.data.position === \"Employee\"){\r\n                  this.setState({admin: false});\r\n                }\r\n\r\n              }\r\n            }\r\n            {this.state.admin===true?(window.location = '/admin/listemployee'):(window.location = '/admin/listConge')}   \r\n          })\r\n            .catch((error) => {\r\n              //this.setState({errorMessage: error.response.data.message});\r\n              this.notify('tc');\r\n              console.log(error);\r\n            });\r\n            \r\n      }*/\r\n    render () {\r\n      const {isPasswordShown} = this.state;\r\n        return(\r\n          \r\n            <Aux>\r\n                \r\n                <div className=\"auth-wrapper\">\r\n                <div className=\"react-notification-alert-container\">\r\n            <NotificationAlert ref=\"notificationAlert\" />\r\n          </div>\r\n                    <div className=\"auth-content\">\r\n                        <div className=\"auth-bg\">\r\n                            <span className=\"r\"/>\r\n                            <span className=\"r s\"/>\r\n                            <span className=\"r s\"/>\r\n                            <span className=\"r\"/>\r\n                        </div>\r\n                        <Form onSubmit={this.onSubmit}>\r\n                        <div className=\"card\">\r\n                            <div className=\"card-body text-center\">\r\n                                <h3 className=\"mb-4\">Login</h3>\r\n                                <Row>\r\n                                    <Col md=\"12\"> \r\n                                        <FormGroup>\r\n                                            <Input type=\"text\" className=\"form-control\" placeholder=\"Username\" required value={this.state.username}\r\n                                            onChange={this.onChangeUsername}/>\r\n                                        </FormGroup>\r\n                                    </Col>\r\n                                </Row>\r\n                                <Row>\r\n                                    <Col md=\"12\"> \r\n                                        <FormGroup>\r\n                                            <Input  type={(isPasswordShown) ? \"text\":\"password\"} className=\"form-control\" placeholder=\"password\" required value={this.state.password}\r\n                                             onChange={this.onChangePassword}/>\r\n                                             <i className={`fa ${isPasswordShown ? \"fa-eye-slash\" : \"fa-eye\"}`} style={{position: 'absolute', top: '13px',right:'10px', cursor:'pointer'}} onClick={this.togglePasswordVisibility}/>\r\n                                        </FormGroup>\r\n                                    </Col>\r\n                                </Row>\r\n                                <button className=\"btn btn-primary shadow-2 mb-4\" type=\"submit\">Login</button>\r\n                            </div>\r\n                        </div>\r\n                        </Form>\r\n                    </div>\r\n                </div>\r\n            </Aux>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}